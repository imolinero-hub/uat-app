:root{
  --bg:#0b1220; --card:#0f172a; --muted:#94a3b8; --ring:255 255 255/0.1;
  --text:#e5e7eb; --text-weak:#cbd5e1;
  --accent-1:#0ea5e9; --accent-2:#6366f1; --accent-3:#22c55e;
}
.theme-light{
  --bg:#f8fafc; --card:#ffffff; --muted:#64748b; --ring:15 23 42/0.08;
  --text:#0f172a; --text-weak:#334155;
}
body{
  color:var(--text);
  background:
    radial-gradient(1200px 800px at 20% -10%, rgba(59,130,246,.18), transparent 40%),
    radial-gradient(900px 600px at 120% 0%, rgba(34,197,94,.12), transparent 35%),
    var(--bg);
  transition: background-color .2s ease, color .2s ease;
}
.pill-lg{
  display:inline-flex; align-items:center;
  padding:.45rem .75rem; border-radius:999px;
  border:1px solid rgba(255,255,255,.14);
  background:linear-gradient(135deg, rgba(14,165,233,.14), rgba(99,102,241,.14));
  color:var(--text); font-size:.85rem;
}
.theme-light .pill-lg{
  border-color: rgba(15,23,42,.14);
  background:linear-gradient(135deg, rgba(14,165,233,.12), rgba(99,102,241,.12));
}
.glass{ background:rgba(255,255,255,.03); backdrop-filter:blur(10px); }
.theme-light .glass{ background:rgba(15,23,42,.04) }
.card{ background:var(--card); border:1px solid rgba(255,255,255,.06); border-radius:1.25rem; }
.theme-light .card{ border-color: rgba(15,23,42,.06); }
/* Unified elevated panel surface for Info modal & AI Status */
.panel{
  background: linear-gradient(180deg, rgba(15,23,42,.98), rgba(15,23,42,.94));
  border: 1px solid rgba(255,255,255,.16);
  border-radius: 1.25rem;
  box-shadow: 0 20px 55px rgba(0,0,0,.45), 0 1px 0 rgba(255,255,255,.03) inset;
}
.theme-light .panel{
  background:#fff; border-color: rgba(15,23,42,.12);
  box-shadow: 0 20px 55px rgba(2,6,23,.15), 0 1px 0 rgba(2,6,23,.06) inset;
}
.ring{ box-shadow:0 0 0 1px rgba(var(--ring)); }
.kpi-label{ font-size:.75rem; letter-spacing:.02em; color:var(--muted); font-weight:600 }
.kpi-value{ font-size:1.6rem; font-weight:700 }
.pill{ border:1px solid rgba(255,255,255,.12); background:rgba(255,255,255,.04); border-radius:999px; padding:.2rem .6rem; font-size:.72rem }
.theme-light .pill{ border-color: rgba(15,23,42,.12); background: rgba(15,23,42,.04) }
.btn{ border:1px solid rgba(255,255,255,.12); border-radius:.9rem; padding:.55rem .9rem; }
.btn:hover{ background-color: rgba(255,255,255,.05); }
.theme-light .btn{ border-color: rgba(15,23,42,.12) }
.btn-primary{ background-image:linear-gradient(135deg,var(--accent-1) 0%,var(--accent-2) 50%,var(--accent-3) 100%); border:none; color:#fff; }
.btn-primary:hover{ background-image: linear-gradient(135deg, var(--accent-1) 0%, var(--accent-2) 50%, var(--accent-3) 100%); color: #fff; filter: brightness(.98); }
.badge{ display:inline-flex; align-items:center; gap:.35rem; font-size:.72rem; padding:.2rem .55rem;
  border-radius:999px; border:1px solid rgba(255,255,255,.12); background:rgba(255,255,255,.04) }
.theme-light .badge{ border-color:rgba(15,23,42,.12); background:rgba(15,23,42,.04) }
.badge-dot{ width:.5rem; height:.5rem; border-radius:999px }
.timeline-dot{ width:.6rem; height:.6rem; border-radius:999px; background:#22c55e; box-shadow:0 0 0 3px rgba(34,197,94,.2) }
.table th, .table td{ padding:.6rem .75rem }
.table thead th{ font-size:.75rem; color:var(--muted); font-weight:600; border-bottom:1px solid rgba(255,255,255,.08) }
.theme-light .table thead th{ border-color: rgba(15,23,42,.08) }
.table tbody tr{ border-bottom:1px solid rgba(255,255,255,.06) }
.theme-light .table tbody tr{ border-color: rgba(15,23,42,.06) }
.link{ color:#60a5fa }
.chart-wrap{ position:relative; height:240px }
.chart-wrap > canvas{ position:absolute; inset:0; width:100% !important; height:100% !important }
.countdown-bar{ height:6px; border-radius:999px; background:linear-gradient(90deg,var(--accent-1),var(--accent-2),var(--accent-3)); }
.toast{ position:fixed; bottom:16px; left:50%; transform:translateX(-50%); background:#ef4444; color:white; font-size:12px; padding:8px 10px; border-radius:8px }
.theme-light .toast{ background:#b91c1c }
.icon-btn{ width:36px; height:36px; display:inline-flex; align-items:center; justify-content:center; border-radius:10px; }
.prose h1, .prose h2, .prose h3 { margin: .75rem 0 .5rem; }
.prose hr { border: 0; border-top: 1px solid rgba(148,163,184,.25); margin: .75rem 0; }
.prose p { margin: .35rem 0; }

/* --- KPI color helpers for R/A/G vs plan --- */
.text-emerald-400 { color: #10b981; } /* green */
.text-amber-300   { color: #f59e0b; } /* amber */
.text-rose-400    { color: #fb7185; } /* red */

/* RAG badge */
.rag-badge{ display:inline-block; font-size:.75rem; font-weight:600; padding:.25rem .6rem; border-radius:.5rem; color:#fff; }
.rag-green{ background:#16a34a; }  /* emerald-600 */
.rag-amber{ background:#f59e0b; }  /* amber-500  */
.rag-red{   background:#dc2626; }  /* red-600    */


/* Theme-aware KPI helper text */
.kpi-planned { font-size: 0.75rem; }         /* same size as your current text-xs */
.kpi-delta   { font-size: 0.75rem; font-weight: 400; }

.theme-light .kpi-planned { color: #475569; } /* slate-600 */
.theme-dark  .kpi-planned { color: #cbd5e1; } /* slate-300 */

.theme-light .kpi-delta   { color: #111827; } /* near-black */
.theme-dark  .kpi-delta   { color: #e5e7eb; } /* slate-200 */

/* Modal base */
.modal-backdrop {
  position: fixed; inset: 0;
  background: rgba(2, 6, 23, .45); /* slate-950 with alpha */
  backdrop-filter: blur(2px);
  z-index: 50;
}
.modal-wrap {
  position: fixed; inset: 0; z-index: 51;
  display: grid; place-items: center;
  padding: 1rem;
}
.modal-panel {
  width: min(920px, 96vw);
  border-radius: 16px;
  box-shadow: 0 10px 30px rgba(0,0,0,.35);
  outline: none;
}
.theme-light .modal-panel { background: #ffffff; color: #0f172a; } /* slate-900 */
.theme-dark  .modal-panel { background: #0f172a; color: #e2e8f0; } /* slate-200 */

/* Header/footer */
.modal-header, .modal-footer {
  padding: .875rem 1rem;
  border-bottom: 1px solid rgba(148,163,184,.2);
}
.modal-footer { border-top: 1px solid rgba(148,163,184,.2); border-bottom: 0; }

/* Scrollable content area */
.modal-body {
  padding: 1rem;
  max-height: min(80vh, 700px);
  overflow: auto;               /* <- gives the scrollbar */
}

/* Prevent background scroll when any modal open */
html.modal-open, body.modal-open { overflow: hidden !important; }

/* ===== Modal content typography (Info & Daily) ===== */
.modal-body h1,
.modal-body h2,
.modal-body h3 { line-height: 1.25; margin: .75rem 0 .5rem; }

.theme-light .modal-body h1 { color: #0f172a; } /* slate-900 */
.theme-dark  .modal-body h1 { color: #e2e8f0; } /* slate-200 */
.theme-light .modal-body h2,
.theme-light .modal-body h3 { color: #111827; } /* gray-900-ish */
.theme-dark  .modal-body h2,
.theme-dark  .modal-body h3 { color: #e5e7eb; } /* gray-200-ish */

.modal-body h1 { font-size: 1.5rem; font-weight: 700; }      /* ≈ text-2xl */
.modal-body h2 { font-size: 1.125rem; font-weight: 600;      /* ≈ text-lg */
                  padding-bottom: .25rem;
                  border-bottom: 1px solid rgba(148,163,184,.25); }
.modal-body h3 { font-size: 1rem; font-weight: 600; }        /* ≈ text-base */
.modal-body p  { margin: .35rem 0; }
.modal-body hr { border: 0; border-top: 1px solid rgba(148,163,184,.25); margin: .75rem 0; }
.modal-body ul { margin: .35rem 0 .6rem; padding-left: 1.25rem; }
.modal-body li { margin: .2rem 0; }

.header-subtle { font-size: .8125rem; color: #94a3b8; }
.theme-dark .header-subtle { color: #9ca3af; }
.header-dot { width: .28rem; height: .28rem; border-radius: 9999px; background: rgba(148,163,184,.6); }
.theme-dark .header-dot { background: rgba(156,163,175,.6); }

/* ====== Mobile card polish ====== */

/* Increase card radius, deeper shadow on mobile */
@media (max-width: 640px) {
  .card {
    border-radius: 20px;                /* more rounded corners on mobile */
    box-shadow: 0 12px 28px rgba(15, 23, 42, 0.08); /* slightly deeper shadow */
  }
  .hdr {
    backdrop-filter: saturate(140%) blur(12px);
  }
}

/* Increase tap target of small buttons on mobile */
@media (max-width: 640px) {
  .btn, .rag-badge, .pill-lg {
    padding-top: 12px;
    padding-bottom: 12px;
  }
}

/* Soft accent border on KPI cards (optional) */
@media (max-width: 640px) {
  .card.kpi {
    border-left-width: 4px;
    border-left-color: #3b82f6; /* fallback accent color */
  }
}

/* Softer section heading margins on mobile */
@media (max-width: 640px) {
  .section h3 {
    margin-top: 12px;
    margin-bottom: 6px;
  }
}

/* Table row cards spacing polish */
@media (max-width: 640px) {
  .row {
    margin-left: 4px;
    margin-right: 4px;
  }
}

/* ===== Header v2 helpers (mobile-first) ===== */
.header-v2 .hdr-row{display:flex;align-items:center;justify-content:space-between;gap:8px}
.header-v2 .title{font-weight:700;font-size:18px;letter-spacing:.2px;line-height:1.1}
.header-v2 .sub{font-size:12px;color:rgba(100,116,139,.95)}            /* slate-500-ish */
.dark .header-v2 .sub{color:rgba(148,163,184,.9)}                      /* slate-400-ish */

.header-v2 .pill{display:inline-flex;align-items:center;gap:8px;padding:8px 12px;
  border-radius:9999px;background:#fff; border:1px solid rgba(203,213,225,.9);
  box-shadow:0 1px 0 rgba(0,0,0,.03)}
.dark .header-v2 .pill{background:rgba(15,23,42,.7); border-color:rgba(51,65,85,.8)} /* dark */

.header-v2 .cta{padding:10px 14px;border-radius:14px;color:#fff;border:0;font-weight:600;
  box-shadow:0 1px 0 rgba(0,0,0,.05); background:linear-gradient(90deg,#6366f1,#22c55e)}

/* Pastel RAG badge */
.header-v2 .rag{padding:6px 10px;border-radius:9999px;font-weight:600;border:1px solid transparent;
  box-shadow:0 1px 0 rgba(0,0,0,.03)}
.header-v2 .rag.is-green{background:#ecfdf5;border-color:#dcfce7;color:#059669}
.header-v2 .rag.is-amber{background:#fffbeb;border-color:#fef3c7;color:#b45309}
.header-v2 .rag.is-red{background:#fef2f2;border-color:#fee2e2;color:#e11d48}

.header-v2 .divider{height:1px;background:rgba(148,163,184,.35); margin-top:.75rem}
.dark .header-v2 .divider{background:rgba(71,85,105,.6)}                /* slate-700-ish */


/* ===== Issues list polish (mobile-first, works in light/dark) ===== */
.issue-card{
  display:grid;
  grid-template-columns: 96px 1fr 20px; /* rail | body | chevron */
  gap:16px;
  align-items:center;
  padding:14px 16px;
  border-radius:14px;
  background:var(--card, #fff);
  border:1px solid var(--border, #e5e7eb);
  box-shadow: var(--shadow, 0 1px 2px rgba(0,0,0,.04));
  transition: transform .06s ease, box-shadow .12s ease, border-color .12s ease;
}
.issue-card:hover{
  border-color:#cbd5e1;
  box-shadow:0 6px 18px rgba(2,6,23,.06);
  transform:translateY(-1px);
}

.issue-rail{ display:flex; flex-direction:column; align-items:flex-start; gap:8px; }
.issue-id{ font-weight:700; color:#2563eb; letter-spacing:.2px; }

.priority-chip{
  display:inline-flex; align-items:center; gap:6px;
  padding:2px 8px; border-radius:999px; font-size:12px; font-weight:600;
  border:1px solid transparent; background:#fee2e2; color:#dc2626; /* default red */
}
.priority-chip .dot{ width:8px; height:8px; border-radius:999px; background:currentColor; opacity:.6; }
.chip--amber{ background:#fef3c7; color:#b45309; }
.chip--red{ background:#fef2f2; color:#dc2626; border-color:#fee2e2; }

.issue-body{ min-width:0; }
.issue-title{ font-weight:600; color:var(--text, #0f172a); }

.issue-meta{
  margin-top:6px; color:#64748b; font-size:13px; display:flex; flex-wrap:wrap; gap:10px;
}
.issue-meta > span{ display:flex; gap:4px; align-items:baseline; }
.issue-meta > span + span{ position:relative; padding-left:10px; }
.issue-meta > span + span:before{
  content:'•'; position:absolute; left:0; color:#94a3b8;
}

.issue-chevron{ color:#94a3b8; font-size:22px; margin-left:auto; }

/* Two-line clamp for the title */
.line-clamp-2{
  display:-webkit-box; -webkit-line-clamp:2; -webkit-box-orient:vertical; overflow:hidden;
}

/* Mobile tweaks */
@media (max-width: 480px){
  .issue-card{ grid-template-columns: 72px 1fr 16px; padding:12px 12px; gap:12px; }
  .issue-id{ font-size:15px; }
  .priority-chip{ font-size:11px; padding:2px 7px; }
  .issue-title{ font-size:15px; }
  .issue-meta{ font-size:12px; gap:8px; }
}

/* Desktop density (optional) */
@media (min-width: 960px){
  .issue-card{ padding:16px 18px; gap:18px; }
}


/* Issues: left rail width + alignment */
.issue-rail{ width:88px }            /* consistent rail so ID and chip share the same left edge */
.issue-chip{ margin-top:.5rem }      /* small gap below the ID */

/* Hide Status on small screens; show from ≥768px (md) */
@media (max-width: 767.98px){
  .issue-status{ display:none; }
}
@media (min-width: 768px){
  .issue-status{ display:inline; }
}
